<div *ngIf="issimple || iscomplexe">
    <h2>Objets appair√©s √† Domovia</h2>
    <div *ngIf="objets$ | async as objets; else loading" class="objets-grid">
        <div       class="objet-card" 
        *ngFor="let objet of objets" 
        [style.backgroundColor]="getPieceColor(objet.PieceID)">
            <button *ngIf="iscomplexe" class="delete-button" (click)="supprimer_objet(objet)">Supprimer</button>
            <button *ngIf="iscomplexe" class="connnexion-button" (click)="connexion(objet)">
              {{ objet.Connexion === 'connecter' ? 'D√©connecter' : 'Connecter' }}
            </button>
            <button 
            *ngIf="iscomplexe && objet.Connexion === 'connecter'" 
            (click)="toggleOnOff(objet)">
            ON/OFF
        </button>            <h3>{{ objet.Nom }}</h3>
            <p>type : {{ objet.Type }}</p>
            <p>√©tat : {{objet.Etat}}</p>
            <p *ngIf="objet.Luminosite !== undefined">Luminosit√© : {{objet.Luminosite}}</p>
            <div *ngIf="iscomplexe && objet.Luminosite !== undefined">
                <label for="luminosite-slider-{{objet.id}}">Ajuster la luminosit√© :</label>
                <input 
                    id="luminosite-slider-{{objet.id}}" 
                    type="range" 
                    min="0" 
                    max="100" 
                    [value]="objet.Luminosite" 
                    (input)="onLuminositeChange($event, objet)" />
            </div>

            <div *ngIf="iscomplexe && objet.Couleur !== undefined">
                <label for="color-picker-{{objet.id}}">Choisir une couleur :</label>
                <input 
                    id="color-picker-{{objet.id}}" 
                    type="color" 
                    [value]="objet.Couleur" 
                    (input)="onCouleurChange($event, objet)" />
            </div>
            
            <div *ngIf="iscomplexe && (objet.Type === 'camera' || objet.Type === 'assistant')">
                <label for="connectivite-select-{{objet.id}}">Modifier la connectivit√© :</label>
                <select 
                    id="connectivite-select-{{objet.id}}" 
                    [value]="objet.Connectivite" 
                    (change)="onConnectiviteChange($event, objet)">
                    <option value="Wi-Fi">Wi-Fi</option>
                    <option value="Filaire">Filaire</option>
                </select>
            </div>
            <div *ngIf="iscomplexe && objet.Resolution !== undefined">
                <label for="resolution-select-{{objet.id}}">Modifier la r√©solution :</label>
                <select 
                    id="resolution-select-{{objet.id}}" 
                    [value]="objet.Resolution" 
                    (change)="onResolutionChange($event, objet)">
                    <option value="1080p">1080p</option>
                    <option value="1440p">1440p</option>
                    <option value="720p">720p</option>
                </select>
            </div>
            
            <div *ngIf="objet.Microphone !== undefined">
                <p>Microphone : {{ objet.Microphone ? 'Ouvert' : 'Ferm√©' }}</p>
                <div *ngIf="iscomplexe">
                    <label for="microphone-select-{{objet.id}}">Modifier l'√©tat du microphone :</label>
                    <select 
                        id="microphone-select-{{objet.id}}" 
                        [value]="objet.Microphone ? 'true' : 'false'" 
                        (change)="onMicrophoneChange($event, objet)">
                        <option value="true">Ouvert</option>
                        <option value="false">Ferm√©</option>
                    </select> 
                </div>
            </div>
            <!--Selection de la piece-->
            <div *ngIf="objet.PieceID!== undefined">
                <p>Pi√®ce actuelle : {{ objet.PieceID }}</p>
            </div>
            <div *ngIf="iscomplexe">
                <label for="piece-select-{{objet.ID}}">Attribuer une pi√®ce :</label>
                <select 
                  id="piece-select-{{objet.ID}}" 
                  [(ngModel)]="objet.PieceID" 
                  (change)="onPieceChange($event, objet)">
                  <option *ngFor="let piece of pieces$ | async" [value]="piece.nom">
                    {{ piece.nom }}
                  </option>
                </select>
              </div>
            <div *ngIf="objet.Volume !== undefined">
                <p>Volume actuel : {{ objet.Volume }}%</p>
            </div>

            <div *ngIf="objet.VolumeCible !== undefined">
                <p>Volume cible : {{ objet.VolumeCible }}%</p>
                <div *ngIf="iscomplexe">
                    <label for="volume-cible-slider-{{objet.id}}">Ajuster le volume cible :</label>
                    <input 
                        id="volume-cible-slider-{{objet.id}}" 
                        type="range" 
                        min="0" 
                        max="100" 
                        [value]="objet.VolumeCible" 
                        (input)="onVolumeCibleChange($event, objet)" />
                </div>
            </div>
            
            <div *ngIf="objet.Type === 'thermostat' && objet.TemperatureActuelle !== undefined">
                <p>Temp√©rature actuelle : {{ objet.TemperatureActuelle }}¬∞C</p>
            </div>

            <div *ngIf="objet.Type === 'thermostat' && objet.TemperatureCible !== undefined">
                <p>Temp√©rature cible : {{ objet.TemperatureCible }}¬∞C</p>
                <div *ngIf="iscomplexe">
                    <label for="temperature-cible-slider-{{objet.id}}">Ajuster la temp√©rature cible :</label>
                    <input 
                        id="temperature-cible-slider-{{objet.id}}" 
                        type="range" 
                        min="10" 
                        max="30" 
                        [value]="objet.TemperatureCible" 
                        (input)="onTemperatureCibleChange($event, objet)" />
                </div>
            </div>
            
            <p>connectivit√© : {{objet.Connectivite}}</p>
            <div *ngIf="objet.Type === 'camera' || objet.Type === 'assistant' && objet.Connectivite === 'Wi-Fi' && objet.Batterie !== undefined">
                <p>Batterie : {{ objet.Batterie }}%</p>
            </div>
            <p>Derniere date de modification : {{date}}</p>
        <p>
            <span *ngIf="objet.Connexion === 'connecter'">‚úÖ</span>
            <span *ngIf="objet.Connexion !== 'connecter'">‚ùå</span>
        </p>
          <span class="categorie">{{ objet.categorie }}</span>
        </div>
    </div>
    <ng-template #loading>Chargement...</ng-template>
    <app-create-object *ngIf="iscomplexe"></app-create-object>
    <app-create-piece *ngIf="iscomplexe"></app-create-piece>
</div>
<div *ngIf="!issimple && !iscomplexe">
    <p>Connectez vous pour voir les objets connect√©s de la maison üè†</p>
</div>